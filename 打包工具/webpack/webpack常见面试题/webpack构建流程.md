# webpack 构建流程

## 1. 初始化参数

从配置文件和 shell 语句中读取与合并参数，得出最终的参数

## 2. 开始编译

-   用上一步得到的参数初始化 compiler 对象，
-   加载所有配置的插件，执行对象的 run 方法开始执行编译

## 3. 确定入口：

根据配置中的 entry 找出所有的入口文件，开始解析文件构建 AST 语法树，找出依赖，递归下去；

## 4. 编译模块

递归中根据文件类型和 loader 配置，调用所有配置的 loader 对文件进行转换，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；

## 5. 完成编译

经过 loader 翻译完所有模块后，得到每个模块被翻译后的最终内容，以及它们之间的依赖关系

## 6. 输入完成

在确定好输入内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统中

以上过程中，webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后，会执行特定的逻辑，并且插件可以调用 webpack 提供的 api 改变 webpack 的运行结果
