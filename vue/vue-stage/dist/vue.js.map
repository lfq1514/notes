{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/ovserve/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isFunction(v){\n    return typeof v==='function'\n}\nexport function isObject(v){\n    return typeof v==='object'&&v!==null\n}\n","import { isObject } from \"../utils\"\n\nclass Observer{\n    //将对象中的所有属性进行劫持\n    constructor(data){\n        this.walk(data)\n    }\n\n    walk(data){\n        Object.keys(data).forEach((key)=>{\n            //将对象的所有属性定义为响应式数据\n            defineReactive(data,key,data[key])\n\n        })\n\n    }\n}\n\nexport function observe(data){\n    if(!isObject(data)){\n        throw new Error('data must be an object')\n    }\n   const ob= new Observer(data)\n    \n}\n\n/**\n * vue2 会对所有的数据，进行响应式处理\n */\nfunction defineReactive(data,key,value){\n    //如果data数据是多层结构，递推处理\n    observe(value)\n\n    Object.defineProperty(data,key,{\n        get(value){\n            return value\n        },\n        set(newValue){\n            //如果用户设置了一个新对象，这个心对象也要进行响应式处理\n            observe(newValue) \n            value=newValue\n        }\n    })\n\n\n}\n","import { observe } from \"./ovserve/index\"\nimport { isFunction, isObject } from \"./utils\"\n\nexport function initState(vm){\n    //获取到选项\n    const opts=vm.$options\n    //数据的初始化优先级：props-->data-->computed-->watch\n\n    if(opts.props){\n\n    }\n    if(opts.data){\n        initData(vm)\n    }\n\n    if(opts.computed){\n        initComputed()\n    }\n\n    if(opts.watch){\n        initWatch()\n\n    }\n}\n\nfunction initData(vm){\n    //拿到数据，进行数据劫持\n    let data=vm.$options.data\n    //data可能是函数，也可能是对象\n   \n    if(isFunction(data)){\n        //取函数的返回至，作为data数据\n       data=data.call(vm)\n       if(!isObject(data)){\n        throw Error('function must return an object')\n       }\n    }else if(isObject(data)) {\n\n    }else {\n        throw new Error('data needs  a function or object')\n    }\n    //将data同时挂在vm的_data属性上\n    vm._data=data\n    //data校验成功之后，就要开始观测数据了\n    observe(data)\n}\n\n\n","\nimport {initState} from './state'\nexport function initMixin(Vue){\n\n    Vue.prototype._init=function(options){\n        const vm=this\n        //把用户的数据映射到vm实例上。\n        vm.$options=options\n        \n        //对用户的数据进行初始化\n        initState(vm)\n    }\n}\n","\nimport {initMixin} from './init'\nfunction Vue(options){\n\n    this._init(options)\n\n    \n}\n//拓展原型\ninitMixin(Vue)\n\nexport default Vue\n"],"names":["isFunction","v","isObject","Observer","constructor","data","walk","Object","keys","forEach","key","defineReactive","observe","Error","value","defineProperty","get","set","newValue","initState","vm","opts","$options","props","initData","computed","initComputed","watch","initWatch","call","_data","initMixin","Vue","prototype","_init","options"],"mappings":"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"}